import struct

table="ABCDEFGHIJKLMNOPQRSTUVWXYZ,.:!? 0123456789-+/*'()@"

offset=[
  (0*30*160)+(0*16),
  (0*30*160)+(1*16),
  (0*30*160)+(2*16),
  (0*30*160)+(3*16),
  (0*30*160)+(4*16),
  (0*30*160)+(5*16),
  (0*30*160)+(6*16),
  (0*30*160)+(7*16),
  (0*30*160)+(8*16),
  (0*30*160)+(9*16),

  (1*30*160)+(0*16),
  (1*30*160)+(1*16),
  (1*30*160)+(2*16),
  (1*30*160)+(3*16),
  (1*30*160)+(4*16),
  (1*30*160)+(5*16),
  (1*30*160)+(6*16),
  (1*30*160)+(7*16),
  (1*30*160)+(8*16),
  (1*30*160)+(9*16),

  (2*30*160)+(0*16),
  (2*30*160)+(1*16),
  (2*30*160)+(2*16),
  (2*30*160)+(3*16),
  (2*30*160)+(4*16),
  (2*30*160)+(5*16),
  (2*30*160)+(6*16),
  (2*30*160)+(7*16),
  (2*30*160)+(8*16),
  (2*30*160)+(9*16),

  (3*30*160)+(0*16),
  (3*30*160)+(1*16),
  (3*30*160)+(2*16),
  (3*30*160)+(3*16),
  (3*30*160)+(4*16),
  (3*30*160)+(5*16),
  (3*30*160)+(6*16),
  (3*30*160)+(7*16),
  (3*30*160)+(8*16),
  (3*30*160)+(9*16),

  (4*30*160)+(0*16),
  (4*30*160)+(1*16),
  (4*30*160)+(2*16),
  (4*30*160)+(3*16),
  (4*30*160)+(4*16),
  (4*30*160)+(5*16),
  (4*30*160)+(6*16),
  (4*30*160)+(7*16),
  (4*30*160)+(8*16),
  (4*30*160)+(9*16),

]

if len(table) != len(offset):
  raise 'blouga'

f = file('text.txt', 'rt')
inp = f.read()
f.close()

out=map(lambda x: table.index(x), filter(lambda x: x in table, inp))

f = file('text.inl', 'wt')
f.write(reduce(lambda x, y: x + struct.pack('>H',offset[y]), out, ''))
f.close()

print 'ok'


DHTOS.START

FN Dhtos_Init
R=FN Dhtos_Init
---------------------------------------------------
˘ Typ:
  Funktion der DHTOS.LIB
˘ Aufgabe:
  Initialisierung der DHTOS.LIB.
˘ Parameter:
  R:  TRUE: Initialisierung war erfolgreich
     FALSE: Initialisierung hat nicht geklappt.
˘ Hinweis:
  FN Dhtos_Init liefert derzeit immer TRUE zurÅck.
  Es werden keine globalen Variablen oder -felder
  benutzt und auch keine Speicher angefordert.
  Dies kann sich jedoch in einer der kommenden
  Versionen Ñndern.
  Melden Sie deshalb die Library immer an.

FN Dhtos_Exit
R=FN Dhtos_Exit
---------------------------------------------------
˘ Typ:
  Funktion der DHTOS.LIB
˘ Aufgabe:
  Abmelden der DHTOS.LIB.
˘ Parameter:
  R:  TRUE: Abmeldung war erfolgreich
     FALSE: Abmeldung hat nicht geklappt.
˘ Hinweis:
  FN Dhtos_Exit liefert derzeit immer TRUE zurÅck.
  Dies kann sich jedoch in einer der kommenden
  Versionen Ñndern.
  Melden Sie daher die Library immer ab.

FN Dhtos_Version
R=FN Dhtos_Version
---------------------------------------------------
˘ Typ:
  Funktion der DHTOS.LIB
˘ Aufgabe:
  Liefert die Versionsnummer der DHTOS.LIB
˘ Parameter:
  R: Versionsnummer der Library als HEX-Wert
     (z.B. $123 fÅr Version 1.23, $42 fÅr V0.42)

FN Dhtos_Date
R=FN Dhtos_Date
---------------------------------------------------
˘ Typ:
  Funktion der DHTOS.LIB
˘ Aufgabe:
  Liefert das Erstellungsdatum der DHTOS.LIB.
˘ Parameter:
  R: Erstellungsdatum der Library im BCD-Format
     (z.B. $04011993 fÅr den 1. April 1993)

Dhtos
---------------------------------------------------
˘ Typ:
  Prozedur aus der DHTOS.LIB
˘ Aufgabe:
  Gibt Informationen zur Library aus.
˘ Hinweis:
  Dieser Aufruf ist lediglich fÅr den Direktmodus
  des Interpreters gedacht.


Informationen zur DHTOS.LIB
---------------------------------------------------
                   DHTOS.LIB
                     V0.2û
                  05.10.1993
                   Freeware
Die aktuelle Version ist beim Autor gegen Einsen-
dung einer formatierten Diskette sowie eines
adressierten und ausreichend frankierten RÅckum-
schlags erhÑltlich.
Modembesitzer finden die aktuelle Version immer in
der Quark Paderborn (05251/71409; Gastdownload) im
Brett "320-ST-Entwicklung" als Archiv mit dem Namen
"DHTOSxxx.ZIP".
Beachten Sie bei der Weitergabe der Library bitte
die Punkte aus der beigefÅgten Datei LIESMICH.TXT.


Autor der DHTOS.LIB
---------------------------------------------------
                   DHTOS.LIB
                  (c) 1993 by
                 Dirk Hagedorn
                In der Esmecke 9
                 59846 Sundern
              All rights reserved.
E-Mail:
˘ MausNet:  Dirk Hagedorn @ PB
˘ MagicNet: Seep @ Paderbox
˘ ZNet:     D.Hagedorn @ HSP
˘ Internet: dirk_hagedorn@pb.maus.de
            (privat, keine Binaries, UUe's etc.)


DHTOS.LIB
---------------------------------------------------
˘ Allgemeines:
  ¯ Autor der DHTOS.LIB
  ¯ Informationen zur DHTOS.LIB
˘ An- und Abmeldung der Library:
  ¯ FN Dhtos_Init
  ¯ FN Dhtos_Exit
˘ Versionsnummer und -datum der Library:
  ¯ Dhtos
  ¯ FN Dhtos_Version
  ¯ FN Dhtos_Date
˘ öbersicht BIOS-Routinen:
  ¯ BIOS-Routinen nach Funktionsnummern sortiert
  ¯ BIOS-Routinen nach Funktionsnamen sortiert
˘ öbersicht XBIOS-Routinen:
  ¯ XBIOS-Routinen nach Funktionsnummern sortiert
  ¯ XBIOS-Routinen nach Funktionsnamen sortiert
˘ öbersicht GEMDOS-Routinen:
  ¯ GEMDOS-Routinen nach Funktionsnummern sortiert
  ¯ GEMDOS-Routinen nach Funktionsnamen sortiert
˘ Strukturen:
  BPB-Struktur      (BIOS Parameter Block)
  MPB-Struktur      (Memory Parameter Block)
  BCONMAP-Struktur
  IOREC-Struktur
  KBDVECS-Struktur
  KEYTAB-Struktur
  METAINFO-Struktur
  PBDEF-Struktur
  DOSTIME-Struktur
  DISKINFO-Struktur
  LINE-Struktur


BPB-Struktur
---------------------------------------------------
typedef struct
{
    WORD recsiz; /* Bytes pro Sektor */
    WORD clsiz;  /* Sektoren pro Cluster */
    WORD clsizb; /* Bytes pro Cluster */
    WORD rdlen;  /* LÑnge des Wurzelverzeichnisses
                    in Sektoren */
    WORD fsiz;   /* LÑnge der File Allocation Table
                    (FAT) */
    WORD fatrec; /* Startsektor der zweiten FAT */
    WORD datrec; /* Sektornummer des ersten freien
                    Clusters */
    WORD numcl;  /* Cluster-Gesamtanzahl auf dem
                    Medium */
    WORD bflags; /* Bitvektor, zur Zeit nur Bit 0
                    belegt: 0 (12-Bit-FAT)
                            1 (16-Bit-FAT) */
} BPB;


MPB-Struktur
---------------------------------------------------
typedef struct
{
    MD *mp_mfl;   /* Zeiger auf Memory Free List */
    MD *mp_mal;   /* Zeiger auf Memory Allocated
                     List */
    MD *mp_rover; /* roving pointer; nur intern
                     benîtigt  */
} MPB;


BCONMAP-Struktur
---------------------------------------------------
typedef struct
{
    MAPTAB *maptab;    /* Zeiger auf Funktions-
                          tabelle */
    WORD   maptabsize; /* Anzahl der EintrÑge */
} BCONMAP;


IOREC-Struktur
---------------------------------------------------
typedef struct
{
    LONG ibuf;        /* Zeiger auf den Puffer   */
    WORD ibufsiz;     /* LÑnge des Puffers       */
    WORD ibufhd;      /* nÑchste Schreibposition */
    WORD ibuftl;      /* nÑchste Leseposition    */
    WORD ibuflow;     /* "untere Wassermarke"    */
    WORD ibufhi;      /* "obere Wassermarke"     */
} IROEC;


KBDVECS-Struktur
---------------------------------------------------
typedef struct
{
   void (*midivec) ();  /* MIDI-Eingabe          */
   void (*vkbderr) ();  /* Tastatur-Fehler       */
   void (*vmiderr) ();  /* MIDI-Fehler           */
   void (*statvec) ();  /* Status von IKBD lesen */
   void (*mousevec) (); /* Mausabfrage           */
   void (*clockvec) (); /* Uhrzeitabfrage        */
   void (*joyvec) ();   /* Joystickabfrage       */
   void (*midisys) ();  /* MIDI-Systemvektor     */
   void (*ikbdsys) ();  /* IKBD-Systemvektor     */
   WORD drvstat;        /* IKBD-Treiberstatus    */
} KBDVECS;


KEYTAB-Struktur
---------------------------------------------------
typedef struct
{
    char *unshift;   /* Tabelle fÅr normale Tasten-
                        drÅcke */
    char *shift;     /* Tabelle fÅr TastendrÅcke
                        mit "Shift" */
    char *capslock;  /* Tabelle fÅr TastendrÅcke
                        bei "Capslock" */
} KEYTAB;


METAINFO-Struktur
---------------------------------------------------
typedef struct
{
    ULONG  drivemap;   /* Tabelle mit Bits fÅr die
                          Meta-DOS-GerÑtetreiber */
    char  *version;    /* Zeichenkette mit Namen
                          und Versionsnummer von
                          Meta-DOS */
    LONG  reserved[2];
} METAINFO;


PBDEF-Struktur
---------------------------------------------------
typedef struct
{
    LONG pb_scrptr; /* Zeiger auf Bildschirm-
                       anfang */
    WORD pb_offset; /* dazu zu addierender
                       Offset */
    WORD pb_width;  /* Bildschirmbreite in
                       Punkten */
    WORD pb_height; /* Bildschirmhîhe in Punkten */
    WORD pb_left;   /* linker Rand in Punkten    */
    WORD pb_right;  /* rechter Rand in Punkten   */
    WORD pb_screz;  /* Auflîsung                 */
    WORD pb_prrez;  /* Druckertyp Atari/Epson    */
    LONG pb_colptr; /* Zeiger auf Farbpalette
    WORD pb_prtype; /* 0:Atari Matrix monochrom
                       1:Atari Matrix farbig
                       2:Atari Typenrad monochrom
                       3:Epson Maxtrix monochrom */
    WORD pb_prport; /* Schnittstelle             */
    LONG pb_mask;   /* Zeiger auf Halbtonmaske   */
} PBDEF;



LINE-Struktur
---------------------------------------------------
typedef struct
{
    BYTE maxlen;       /* maximale LÑnge der Ein-
                          gabe */
    BYTE actuallen;    /* tatsÑchliche LÑnge     */
    CHAR buffer[255];  /* eingelesene Zeichen    */
} LINE;



DISKINFO-Struktur
---------------------------------------------------
typedef struct
{
    LONG b_free;    /* Anzahl der freien Cluster */
    LONG b_total;   /* Gesamtzahl der Cluster    */
    LONG b_secsize; /* Bytes pro Sektor          */
    LONG b_clsiz;   /* Sektoren pro Cluster      */
} DISKINFO;



DOSTIME-Struktur
---------------------------------------------------
typedef struct
{
    UWORD time;  /* Zeit wie in "FN Tgettime"  */
    UWORD date;  /* Datum wie in "FN Tgetdate" */
} DOSTIME;



DTA-Struktur
---------------------------------------------------
typedef struct
{
    BYTE  d_reserved[21];  /* fÅr GEMDOS reser-
                              viert */
    BYTE  d_attrib;        /* Dateiattribut      */
    UWORD d_time;          /* Uhrzeit            */
    UWORD d_date;          /* Datum              */
    LONG  d_length;        /* DateilÑnge         */
    char  d_fname[14];     /* Dateiname          */
} DTA;




TOS-Fehlercodes
---------------------------------------------------
BIOS-, XBIOS- und GEMDOS-Funktionen liefern den
Status der letzten ausgefÅhrten Aktion zurÅck.
Die DHTOS.LIB legt *keine* gleichnamigen
Konstanten an.
öbersicht der TOS-Fehlercodes:
  0: E_OK     (no error)
 -1: ERROR    (error)
 -2: EDRVNR   (drive not ready)
 -3: EUNCMD   (unknown command)
 -4: E_CRC    (CRC error)
 -5: EBADRQ   (bad request)
 -6: E_SEEK   (seek error)
 -7: EMEDIA   (unknown media)
 -8: ESECNF   (sector not found)
 -9: EPAPER   (out of paper)
-10: EWRITF   (write fault)
-11: EREADF   (read fault)
-12: EGENRL   (general error)
-13: EWRPRO   (write on write-protected media)
-14: E_CHNG   (media change detected)
-15: EUNDEV   (unknown device)
-16: EBADSF   (bad sectors on format)
-17: EOTHER   (insert other disk (request))
-18: EINSERT  (insert disk)
-19: EDVNRSP  (device not responding)
-32: EINVFN   (invalid function number)
-33: EFILNF   (file not found)
-34: EPTHNF   (path not found)
-35: ENHNDL   (handle pool exhausted)
-36: EACCDN   (Access denied)
-37: EIHNDL   (invaild handle)
-39: ENSMEM   (insufficient memory)
-40: EIMBA    (invalid memory block address)
-46: EDRIVE   (invaild drive specification)
-48: ENSAME   (not the same drive)
-49: ENMFIL   (no more files)
-58: ELOCKED  (record is locked)
-59: ENSLOCK  (matching lock not found)
-64: ERANGE   (range error)
-65: EINTRN   (GEMDOS internal error)
-66: EPLFMT   (invalid executable file format)
-67: EGSBF    (memory block growth failure)



BIOS-Routinen nach Funktionsnummern
---------------------------------------------------
BIOS  0:  Getmpb
BIOS  1:  FN Bconstat
BIOS  2:  FN Bconin
BIOS  3:  FN Bconout
BIOS  4:  FN Rwabs
BIOS  5:  FN Setex
BIOS  6:  FN Tickcal
BIOS  7:  FN Getbpb
BIOS  8:  FN Bcostat
BIOS  9:  FN Mediach
BIOS 10:  FN Drvmap
BIOS 11:  FN Kbshift


BIOS-Routinen nach Funktionsnamen
---------------------------------------------------
FN Bconin       BIOS  2
FN Bconout      BIOS  3
FN Bconstat     BIOS  1
FN Bcostat      BIOS  8
FN Drvmap       BIOS 10
FN Getbpb       BIOS  7
Getmpb          BIOS  0
FN Kbshift      BIOS 11
FN Mediach      BIOS  9
FN Rwabs        BIOS  4
FN Setex        BIOS  5
FN Tickcal      BIOS  6

FN Bconin
R=FN Bconin(Dev)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Einlesen eines Zeichens von einem EingabegerÑt.
˘ Parameter:
  Dev: EingabegerÑtnummer
  R:   eingelesenes Zeichen
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,2,Dev)

FN Bconout
R=FN Bconout(Dev,C)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ausgabe eines Zeichens.
˘ Parameter:
  Dev: AusgabegerÑtnummer
  C:   auszugebendes Zeichen
  R:   Im Fehlerfall 0
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,3,Dev,C)

FN Bconstat
R=FN Bconstat(Dev)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Feststellen des Status eines EingabegerÑtes.
˘ Parameter:
  Dev: EingabegerÑtnummer
  R:   0: kein Zeichen verfÅgbar
      -1: mindestens ein Zeichen verfÅgbar
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,1,Dev)

FN Bcostat
R=FN Bcostat(Dev)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Feststellen des Status eines AusgabegerÑts.
˘ Parameter:
  Dev: AusgabegerÑtnummer
  R:   0: Zeichen kann nicht ausgegeben werden.
      -1: Zeichen kann ausgegeben werden.
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,8,Dev)

FN Drvmap
R=FN Drvmap
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermittlung eines Bitvektors, der die dem BIOS
  bekannten logischen Laufwerke angibt.
˘ Parameter:
  R:   Bitvektor (A: Bit0, B: Bit1, ...)
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,10)

FN Getbpb
R=FN Getbpb(Dev)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermittlung der Adresse des BIOS-Parameter-Blocks.
˘ Parameter:
  Dev: GerÑtenummer (A: 0, B:1, ...)
  R:   Zeiger auf den BPB oder 0 im Fehlerfall.
˘ Hinweise:
  ¯ siehe auch BPB-Struktur
  ¯ Ersetzt den Befehl BIOS (R,7,Dev)

Getmpb
PROC Getmpb(P_Mpb)
---------------------------------------------------
˘ Typ:
  BIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Initialisierung der Speicherverwaltung.
˘ Parameter:
  P_Mpb: Adresse einer MPB-Struktur
˘ Hinweis:
  Ersetzt den Befehl BIOS (,0,L P_Mpb)

FN Kbshift
R=FN Kbshift(Mode)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Einlesen eines Zeichens von einem EingabegerÑt.
˘ Parameter:
  Mode:  <0: aktueller Status ermitteln
        >=0: neuen Status setzen
  R:    aktueller (bzw. bisheriger) Tastaturstatus
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,11,Mode)

FN Mediach
R=FN Mediach(Dev)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Feststellen, ob ein Medienwechsel stattgefunden
  hat.
˘ Parameter:
  Dev: Laufwerksnummer (A: 0, B: 1, ...)
  R:   0: mit Sicherheit nicht gewechselt
       1: vielleicht gewechselt
       2: mit Sicherheit gewechselt
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,9,Dev)

FN Rwabs
R=FN Rwabs(Rwflag,Buf,Count,Recno,Dev,Irecno)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Lesen und Schreiben von Sektoren von bzw. auf
  Disketten oder anderen gerÑten.
˘ Parameter:
  Rwflag: Bitvektor, der die Operation festlegt
  Buf:    Anfangsadresse eine Puffers
  Count:  Anzahl der zu Åbertragenden Sektoren
  Recno:  Nummer des ersten Sektors
  Dev:    Nummer des logischen Laufwerks bzw.
          2 plus GerÑtenummer
  Irecno: nur bei AHDI-kompatiblen HD-Treibern
  R:      0 (OK) bzw. BIOS-Fehlermeldung
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,4,Rwflag,L Buf,
                      Count, Recno,Dev,Irecno)

FN Setex
R=FN Setex(Vecnum,Vec)
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen und Lesen der Exception-Vektoren.
˘ Parameter:
  Vecnum: Nummer des Vektors (=Adresse/4)
  Vec:    Neue Adress bzw. -1 zum Lesen
  R:      Bisheriger (bzw. aktueller) Wert des
          Vektors
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,5,Vecnum,L Vec)

FN Tickcal
R=FN Tickcal
---------------------------------------------------
˘ Typ:
  BIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Liefert die Anzahl von Millisekunden zwischen
  zwei Aufrufen des Systemtimers.
˘ Parameter:
  R: Anzahl der Millisekunden
˘ Hinweis:
  Ersetzt den Befehl BIOS (R,6)



XBIOS-Routinen nach Funktionsnummern
---------------------------------------------------
XBIOS  0:     Initmous
XBIOS  1:     FN Ssbrk
XBIOS  2:     FN Physbase
XBIOS  3:     FN Logbase
XBIOS  4:     FN Getrez
XBIOS  5:     Setscreen
XBIOS  6:     Setpalette
XBIOS  7:     FN Setcolor
XBIOS  8:     FN Floprd
XBIOS  9:     FN Flopwr
XBIOS 10:     FN Flopfmt
XBIOS 12:     Midiws
XBIOS 13:     Mfpint
XBIOS 14:     FN Iorec
XBIOS 15:     FN Rsconf
XBIOS 16:     FN Keytbl
XBIOS 17:     FN Random
XBIOS 18:     Protobt
XBIOS 19:     FN Flopver
XBIOS 20:     Scrdmp
XBIOS 21:     FN Cursconf
XBIOS 22:     Settime
XBIOS 23:     FN Gettime
XBIOS 24:     Bioskeys
XBIOS 25:     Ikbdws
XBIOS 26:     Jdisint
XBIOS 27:     Jenabint
XBIOS 28:     FN Giaccess
XBIOS 29:     Offgibit
XBIOS 30:     Ongibit
XBIOS 31:     Xbtimer
XBIOS 32:     Dosound
XBIOS 33:     FN Setprt
XBIOS 34:     FN Kbdvbase
XBIOS 35:     FN Kbrate
XBIOS 36:     Prtblk
XBIOS 37:     Vsync
XBIOS 38:     FN Supexec
XBIOS 39:     Puntaes
XBIOS 41:     FN Floprate
XBIOS 42:     FN Dmaread
XBIOS 43:     FN Dmawrite
XBIOS 44:     FN Bconmap
XBIOS 46:     FN Nvmaccess
XBIOS 48:     Metainit
XBIOS 64:     FN Blitmode
XBIOS 80:     FN Esetshift
XBIOS 81:     FN Egetshift
XBIOS 82:     FN Esetbank
XBIOS 83:     FN Esetcolor
XBIOS 84:     Esetpalette
XBIOS 85:     Egetpalette
XBIOS 86:     FN Esetgray
XBIOS 87:     FN Esetsmear


XBIOS-Routinen nach Funktionsnamen
---------------------------------------------------
FN Bconmap       XBIOS 44
Bioskeys         XBIOS 24
FN Blitmode      XBIOS 64
FN Cursconf      XBIOS 21
FN Dmaread       XBIOS 42
FN Dmawrite      XBIOS 43
Dosound          XBIOS 32
Egetpalette      XBIOS 85
FN Egetshift     XBIOS 81
FN Esetbank      XBIOS 82
FN Esetcolor     XBIOS 83
FN Esetgray      XBIOS 86
Esetpalette      XBIOS 84
FN Esetshift     XBIOS 80
FN Esetsmear     XBIOS 87
FN Flopfmt       XBIOS 10
FN Floprate      XBIOS 41
FN Floprd        XBIOS  8
FN Flopver       XBIOS 19
FN Flopwr        XBIOS  9
FN Getrez        XBIOS  4
FN Gettime       XBIOS 23
FN Giaccess      XBIOS 28
Ikbdws           XBIOS 25
Initmous         XBIOS  0
FN Iorec         XBIOS 14
Jdisint          XBIOS 26
Jenabint         XBIOS 27
FN Kbdvbase      XBIOS 34
FN Kbrate        XBIOS 35
FN Keytbl        XBIOS 16
FN Logbase       XBIOS  3
Metainit         XBIOS 48
Mfpint           XBIOS 13
Midiws           XBIOS 12
FN Nvmaccess     XBIOS 46
Offgibit         XBIOS 29
Ongibit          XBIOS 30
FN Physbase      XBIOS  2
Protobt          XBIOS 18
Prtblk           XBIOS 36
Puntaes          XBIOS 39
FN Random        XBIOS 17
FN Rsconf        XBIOS 15
Scrdmp           XBIOS 20
FN Setcolor      XBIOS  7
Setpalette       XBIOS  6
FN Setprt        XBIOS 33
Setscreen        XBIOS  5
Settime          XBIOS 22
FN Ssbrk         XBIOS  1
FN Supexec       XBIOS 38
Vsync            XBIOS 37
Xbtimer          XBIOS 31


FN Bconmap
R=FN Bconmap(Devno)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Dem BIOS-Kanal 1 eine der erweiterten Kanal-
  nummern zuordnen
˘ Parameter:
  Devno:  -2: Zeiger auf BCONMAP-Struktur liefern
          -1: Nur aktuelle Kanalnummer abfragen
           0: Test, ob "Bconmap" vorhanden ist
         >=6: Neue Kanalnummer
  R:     Zeiger auf BCONMAP-Struktur bzw.
         neue Kanalnummer
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,44,Devno)

 Bioskeys
PROC Bioskeys
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Herstellen der ursprÅnglichen Tastaturbelegung.
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,24)

FN Blitmode
R=FN Blitmode(Mode)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Konfiguration des Blitter-Chips
˘ Parameter:
  Mode: 0: Status der Blitterregister auslesen
        1: Blitterbetrieb umschalten
  R:    Bisheriger Blitterstatus
˘ Hinweise:
  ¯ erst ab TOS 1.02
  ¯ Ersetzt den Befehl XBIOS (R,64,Mode)

FN Cursconf
R=FN Cursconf(Function,Operand)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Cursor-Atrribute setzen oder lesen
˘ Parameter:
  Function: 0: CURS_HIDE
            1: CURS_SHOW
            2: CURS_BLINK
            3: CURS_NOBLINK
            4: CURS_SETRATE
            5: CURS_GETRATE
  Operand:  Blinkrate fÅr CURS_SETRATE
  R:        aktuelle Blinkrate bei CURS_GETRATE
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,21,Function,Operand)

FN Dmaread
R=FN Dmaread(Sector,Count,Buffer,Devno)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Lesen von Sektoren von einem ACSI/SCSI-GerÑt
˘ Parameter:
  Sector: erste Sektornummer
  Count:  Anzahl der Sektoren
  Buffer: Anfangsadresse im Speicher
  Devno:  GerÑtenummer
  R:      BIOS-Fehlercode (0=OK)
˘ Hinweise:
  ¯ nicht auf allen TOS-Versionen
  ¯ Ersetzt den Befehl XBIOS (R,42,L Sector,
                              Count,L Buffer,Devno)
FN Dmawrite
R=FN Dmawrite(Sector,Count,Buffer,Devno)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Schreiben von Sektoren auf ein ACSI/SCSI-GerÑt
˘ Parameter:
  Sector: erste Sektornummer
  Count:  Anzahl der Sektoren
  Buffer: Anfangsadresse im Speicher
  Devno:  GerÑtenummer
  R:      BIOS-Fehlercode (0=OK)
˘ Hinweis:
  ¯ nicht auf allen TOS-Versionen
  ¯ Ersetzt den Befehl XBIOS (R,43,L Sector,
                              Count,L Buffer,Devno)

Dosound
PROC Dosound(Ptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Automatisches Beschreiben der Register des Sound-
  chips
˘ Parameter:
  Ptr: Adresse einer Bytefolge mit Soundbefehlen
˘ Hinweis:
  ¯ Ersetzt den Befehl XBIOS (,32,L Ptr)

Egetpalette
PROC Egetpalette(Colornum,Count,Paletteptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Lesen der TT-Farbregister
˘ Parameter:
  Colornum:   Nummer des ersten Registers
  Count:      Anzahl der zu lesenden Register
  Paletteptr: Zeiger auf Farbtabelle
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (,85,Colornum,Count,
                                      L Paletteptr)

FN Egetshift
R=FN Egetshift
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Abfrage des Werts des Shiftmode-Registers des
  Video-Shifters des TT.
˘ Parameter:
  R:
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,81)

FN Esetbank
R=FN Esetbank(Banknum)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  TT-Farbregister-Bank setzen
˘ Parameter:
  Banknum: Nummer der neuen aktiven Bank
  R:       bisherige Banknummer
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,82,Banknum)

FN Esetcolor
R=FN Esetcolor(Colornum,Color)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen eines Farbregisters des TT-Shifters
˘ Parameter:
  Colornum: Nummer des Farbregisters
  Color:    neue Farbe
  R:        biheriger Wert
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt XBIOS (R,83,Colornum,Color)

FN Esetgray
R=FN Esetgray(Switch)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  TT-Graustufenmodus ein- bzw. ausschalten
˘ Parameter:
  Switch: <>0: einschalten
  R:      bisheriger Wert
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,86,Switch)

Esetpalette
PROC Esetpalette(Colornum,Count,Paletteptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen eines zusammenhÑngenden Bereichs von
  Farbregistern in der Farbpalette des TT-Shifters
˘ Parameter:
  Colornum:   Nummer des ersten Registers
  Count:      Anzahl der zu setzenden Register
  Paletteptr: Zeiger auf zu Åbertragende
              Farbtabelle
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (,84,Colornum,Count,
                                      L Paletteptr)

FN Esetshift
R=FN Esetshift(Shftmode)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen des Shiftmode-Registers im Video-Shifter
  des TT.
˘ Parameter:
  Shftmode: neuer Wert
  R:        bisheriger Wert
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,81,Shftmode)

FN Esetsmear
R=FN Esetsmear(Switch)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Umschalten des Smear-Modus des TT-Videobausteins
˘ Parameter:
  Switch: =0: Smear-Modus aus
          >0: Smear-Modus ein
          <0: nur Modus abfragen
  R:      bisheriger Wert
˘ Hinweise:
  ¯ nur fÅr TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,87,Switch)

FN Flopfmt
R=FN Flopfmt(Buf,Filler,Devno,Spt,Trackno,Sideno,
             Interlv,Virgin)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Formatieren einer Spur einer Diskette.
˘ Parameter:
  siehe ST/STE/TT Profibuch

FN Floprate
R=FN Floprate(Drive,Seekrate)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Seekrate eines Laufwerks abfragen und setzen
˘ Parameter:
  Drive:    Laufwerksnummer
  Seekrate: neue Seekrate oder -1, wenn nur gelesen
            werden soll
  R:        vorherige Seekrate
˘ Hinweise:
  ¯ erst ab TOS 1.04
  ¯ Ersetzt den Befehl XBIOS

FN Floprd
R=FN Floprd(Buf,Filler,Devno,Sectno,Trackno,
            Sideno,Count)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Lesen von Sektoren einer Diskette
˘ Parameter:
  siehe ST/STE/TT Profibuch

FN Flopver
R=FN Flopver(Buf,Filler,Devno,Sectno,Trackno,
             Sideno,Count)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Lesen von Sektoren einer Diskette und Vergleich
  mit einem Speicherbereich.
˘ Parameter:
  siehe ST/STE/TT-Profubuch

FN Flopwr
R=FN Flopwr(Buf,Filler,Devno,Sectno,Trackno,
            Sideno,Count)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Schreiben von Sektoren einer Diskette
˘ Parameter:
  siehe ST/STE/TT Profibuch

FN Getrez
R=FN Getrez
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermittelt aktuelle Bildschirmauflîsung
˘ Parameter:
  R:
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Videohardware
  ¯ besser nicht benutzen
  ¯ Ersetzt den Befehl XBIOS (R,4)

FN Gettime
R=FN Gettime
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Lesen der Uhrzeit und des Datums aus der
  Hardwareuhr.
˘ Parameter:
  R: Bit 0..4:   Sekunden (x2)
     Bit 5..10:  Minuten
     Bit 11..15: Stunden
     Bit 16..20: Tag
     Bit 21..24: Monat
     Bit 25..31: Jahre seit 1980
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,23)

FN Giaccess
R=FN Giaccess(Data,Regno)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen und Lesen von GI-Soundchip-Registern
˘ Parameter:
  Data:  zu schreibender 8-Bit-Wert
  Regno: Registernummer
  R:     Wert des Registers
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,28,Data,Regno)

kbdws
PROC Ikbdws(Cnt,Ptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Gibt eine Zeichenkette an den IKBD-Chip aus.
˘ Parameter:
  Cnt: Anzahl der Bytes minus 1
  Ptr: Zeiger auf Bytefolge im Speicher
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,25,Cnt,L Ptr)

Initmous
PROC Initmous(Type,Param,Vec)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Initialisieren von Mauszeigerroutinen
˘ Parameter:
  Type:  0: Maus ausschalten
         1: Maus einschalten, relativer Modus
         2: Maus einschalten, absoluter Modus
         4: Maus einschalten, Tastatursimulation
  Param: Adresse einer PARAM-Struktur
         siehe ST/STE/TT-Profibuch
  Vec:   Adresse einer Maustreiber-Routine
˘ Hinweis:
  Ersetzt XBIOS (,0,Type,L Param,L Vec)

FN Iorec
R=FN Iorec(Devno)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Liefert einen Zeiger auf die IOREC-Struktur
˘ Parameter:
  Devno: 0: RS232
         1: IKBD (Tastatur)
         2: MIDI
  R:     Zeiger auf IOREC-Struktur
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,14,Devno)

Jdisint
PROC Jdisint(Intno)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Sperren des angegebenen Interrupts des MFP 68901
˘ Parameter:
  Intno: Nummer des Interrupts
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,26,Intno)

Jenabint
PROC Jenabint(Intno)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Einschalten des Interrupts des MFP 68901
˘ Parameter:
  Intno: Nummer des Interrupts
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,27,Intno)

FN Kbdvbase
R=FN Kbdvbase
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Liefert einen Zeiger auf eine KBDVECS-Struktur
˘ Parameter:
  R: Zeiger auf eine KBDVECS-Struktur
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,27)

FN Kbrate
R=FN Kbrate(Initial,Repeat)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen/Abfragen der Tastatur-Wiederholrate
˘ Parameter:
  Initial: Ansprechzeit (-1: keine énderung)
  Repeat:  Geschwindigkeit (-1: keine énderung)
  R:       Bit 0..7:  bisheriger Wert von "Repeat"
           Bit 8..15: bisheriger Wert von "Initial"
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,35,Initial,Repeat)

FN Keytbl
R=FN Keytbl(Unshift,Shift,Capslock)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Adressen der Tastencode-Umwandlungstabellen
  setzen bzw. ermitteln.
˘ Parameter:
  Unshift:  Zeiger auf "Unshift"-Tabelle (oder -1)
  Shift:    Zeiger auf "Shift"-Tabelle (oder -1)
  Capslock: Zeiger auf "Capslock"-Tabelle (oder -1)
  R:        Zeiger auf KEYTAB-Struktur"
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,16,L Unshift,
                                L Shift,L Capslock)

FN Logbase
R=FN Logbase
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermittlung der Anfangsadresse des logischen
  Bildschirmspeichers.
˘ Parameter:
  R: Anfangsadresse
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Hardware
  ¯ Ersetzt den Befehl XBIOS (R,3)

Metainit
PROC Metainit(Buffer)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgaben:
  ¯ METAINFO-Struktur lîschen
  ¯ Metainit() aufrufen
  ¯ Testen, ob "version" immer noch einen
    Nullzeiger enthÑlt (-> keine Meta-DOS)
˘ Parameter:
  Buffer: Adresse einer METAINFO-Struktur
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,48,L Buffer)

Mfpint
PROC Mfpint(Interno,Vector)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Setzen der Interrupt-Vektoren des MFP 68901
˘ Parameter:
  Interno: Nummer des Vektors
  Vector:  Neue Adresse des Vektors
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,13,Interno,L Vector)

Midiws
PROC Midiws(Cnt,Ptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Ausgabe einer Bytefolge auf dem MIDI-Port
˘ Parameter:
  Cnt: Anzahl der Bytes minus 1
  Ptr: Zeiger auf Bytefolge
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,12,Cnt,L Ptr)

FN Nvmaccess
R=FN Nvmaccess(Op,Start,Count,Buffer)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Zugriff auf das NVM
˘ Parameter:
  Siehe ST/STE/TT-Profibuch
˘ Hinweise:
  ¯ nur auf dem TT
  ¯ Ersetzt XBIOS (R,46,Op,Start,Count,Buffer)

Offgibit
PROC Offgibit(Bitno)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Bits im "Port A"-Register des GI-Chips lîschen.
˘ Parameter:
  Bitno: Bitmaske, mit der der aktuelle Register-
         inhalt undiert wird.
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,29,Bitno)

Ongibit
PROC Ongibit(Bitno)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Bits im "Port A"-Register des GI-Chips setzen.
˘ Parameter:
  Bitno: Bitmaske, mit der der aktuelle Register-
         inhalt oderiert wird.
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,30,Bitno)

FN Physbase
R=FN Physbase
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermitteln der Anfangsadresse des physikalischen
  Bildschirmspeichers
˘ Parameter:
  R: Anfangsadresse
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,2)

Protobt
PROC Protobt(Buf,Serialno,Disktype,Execflag)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Aufbau eines Bootsektors im Speicher.
˘ Parameter:
  Siehe ST/STE/TT-Profibuch
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,18,L Buf,L Serialno,
                                 Disktype,Execflag)

Prtblk
PROC Prtblk(Defptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Flexible Hardcopy.
˘ Parameter:
  Defptr: Adresse einer PBDEF-Struktur
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,36,L Defptr)

Puntaes
PROC Puntaes
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Siehe ST/STE/TT-Profibuch
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,39)

FN Random
R=FN Random
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Ermittlung einer 24-Bit-Zufallszahl
˘ Parameter:
  R: 24-Bit-Zufallszahl
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,17)

FN Rsconf
R=FN Rsconf(Speed,Flowctl,Ucr,Rsr,Tsr,Scr)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Parameter der seriellen Schnittstelle setzen.
˘ Parameter:
  Speed:     Schnittstellengeschwindigkeit
  Flowctl:   Fluûkontrolle
  Ucr, Rsr,: Werte fÅr die Register
  Tsr, Scr
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,15,Speed,Flowctl,
                                   Ucr,Rsr,Tsr,Scr)

Scrdmp
PROC Scrdmp
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Simuliert Alternate-HELP
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,20)

FN Setcolor
R=FN Setcolor(Colornum,Color)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen und Lesen eines Farbregisters
˘ Parameter:
  Colornum: Neuer Farbwert oder -1
  Color:    Nummer des Farbregisters (0..15)
  R:        bisheriger Wert des Registers
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (R,7,Colornum,Color)

Setpalette
PROC Setpalette(Paletteptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Neue Farbpalette setzen.
˘ Parameter:
  Paletteptr: zeiger auf Farbtabelle.
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Videohardware
  ¯ Ersetzt den Befehl XBIOS (,6,Paletteptr)

FN Setprt
R=FN Setprt(Config)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Setzen oder Lesen der Druckereinstellungen.
˘ Parameter:
  Config: Konfiguartionsbyte bzw. -1 (nur lesen)
  R:      aktuelle Konfiguration
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,33,Config)

Setscreen
PROC Setscreen(Logloc,Physloc,Res)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  éndern der Bildschirmspeicheradressen und
  Auflîsung.
˘ Parameter:
  Logloc:  neue Adresse des logischen Bildschirm-
           speichers bzw. -1 (nicht Ñndern)
  Physloc: neue Adresse des physikalischen
           Bildschirmspeichers bzw. -1
  Res:     neue Auflîsung bzw. -1
˘ Hinweise:
  ¯ nur fÅr ST/STE/TT-Videohardware
  ¯ Ersetzt XBIOS (,5,L Logloc,L Physloc,Res)

Settime
PROC Settime(Datetime)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Setzen der Hardwareuhr.
˘ Parameter:
  Siehe FN Gettime
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,22,Datetime)

FN Ssbrk
R=FN Ssbrk(Amount)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  Dummy-Routine
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,1,Amount)

FN Supexec
R=FN Supexec(Codeptr)
---------------------------------------------------
˘ Typ:
  XBIOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  FÅhrt ein Unterprogramm im Supervisor-Modus aus.
˘ Parameter:
  Codeptr: Anfangsdresse einer durch RTS abge-
           geschlossenen Routine
  R:       Return-Wert der Routine
˘ Hinweis:
  Ersetzt den Befehl XBIOS (R,38,L Codeptr)

Vsync
PROC Vsync
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Wartet, bis ein Vertical-Blank-Interrupt
  aufgetreten ist.
˘ Hinweis:
  Ersetzt den Befehl XBIOS (,37)

Xbtimer
PROC Xbtimer(Timer,Control,Data,Vec)
---------------------------------------------------
˘ Typ:
  XBIOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  Setzt und startet die MFP 68901-Timer.
˘ Parameter:
  Timer:    Nummer des Timers
  Control,: Werte fÅr die entsprechenden Register
  Data
  Vec:      Adresse der zugehîrigen Routine
˘ Hinweis:
  Ersetzt XBIOS (,31,Timer,Control,Data,Vec)


GEMDOS-Routinen nach Funktionsnamen
---------------------------------------------------

FN Cauxin       GEMDOS  3
FN Cauxis       GEMDOS 18
FN Cauxos       GEMDOS 19
Cauxout         GEMDOS  4
FN Cconin       GEMDOS  1
FN Cconis       GEMDOS 11
FN Cconos       GEMDOS 16
Cconout         GEMDOS  2
Cconrs          GEMDOS 10
Cconws          GEMDOS  9
FN Cnecin       GEMDOS  8
FN Cprnos       GEMDOS 17
FN Cprnout      GEMDOS  5
FN Crawcin      GEMDOS  7
FN Crawio       GEMDOS  6
FN Dcreate      GEMDOS 57
FN Ddelete      GEMDOS 58
FN Dfree        GEMDOS 54
FN Dgetdrv      GEMDOS 25
FN Dgetpath     GEMDOS 71
FN Dsetdrv      GEMDOS 14
FN Dsetpath     GEMDOS 59
FN Fattrib      GEMDOS 67
FN Fclose       GEMDOS 62
FN Fcreate      GEMDOS 60
FN Fdatime      GEMDOS 87
FN Fdelete      GEMDOS 65
FN Fdup         GEMDOS 69
FN Fforce       GEMDOS 70
FN Fgetdat      GEMDOS 47
FN Flock        GEMDOS 92
FN Fopen        GEMDOS 61
FN Fread        GEMDOS 63
FN Frename      GEMDOS 86
FN Fseek        GEMDOS 66
Fsetdta         GEMDOS 26
FN Fsfirst      GEMDOS 78
FN Fsnext       GEMDOS 79
FN Fwrite       GEMDOS 64
FN Maddalt      GEMDOS 20
FN Malloc       GEMDOS 72
FN Mfree        GEMDOS 73
FN Mshrink      GEMDOS 74
FN Mxalloc      GEMDOS 68
FN Pexec        GEMDOS 75
Pterm0          GEMDOS  0
Pterm           GEMDOS 76
Ptermres        GEMDOS 49
FN Super        GEMDOS 32
FN Sversion     GEMDOS 48
FN Tgetdate     GEMDOS 42
FN Tgettime     GEMDOS 44
FN Tsetdate     GEMDOS 43
FN Tsettime     GEMDOS 45


GEMDOS-Routinen nach Funktionsnummern
---------------------------------------------------
GEMDOS  0:     Pterm0
GEMDOS  1:     FN Cconin
GEMDOS  2:     Cconout
GEMDOS  3:     FN Cauxin
GEMDOS  4:     Cauxout
GEMDOS  5:     FN Cprnout
GEMDOS  6:     FN Crawio
GEMDOS  7:     FN Crawcin
GEMDOS  8:     FN Cnecin
GEMDOS  9:     Cconws
GEMDOS 10:     Cconrs
GEMDOS 11:     FN Cconis
GEMDOS 14:     FN Dsetdrv
GEMDOS 16:     FN Cconos
GEMDOS 17:     FN Cprnos
GEMDOS 18:     FN Cauxis
GEMDOS 19:     FN Cauxos
GEMDOS 20:     FN Maddalt
GEMDOS 25:     FN Dgetdrv
GEMDOS 26:     Fsetdta
GEMDOS 32:     FN Super
GEMDOS 42:     FN Tgetdate
GEMDOS 43:     FN Tsetdate
GEMDOS 44:     FN Tgettime
GEMDOS 45:     FN Tsettime
GEMDOS 47:     FN Fgetdat
GEMDOS 48:     FN Sversion
GEMDOS 49:     Ptermres
GEMDOS 54:     FN Dfree
GEMDOS 57:     FN Dcreate
GEMDOS 58:     FN Ddelete
GEMDOS 59:     FN Dsetpath
GEMDOS 71:     FN Dgetpath
GEMDOS 60:     FN Fcreate
GEMDOS 61:     FN Fopen
GEMDOS 62:     FN Fclose
GEMDOS 63:     FN Fread
GEMDOS 64:     FN Fwrite
GEMDOS 65:     FN Fdelete
GEMDOS 66:     FN Fseek
GEMDOS 67:     FN Fattrib
GEMDOS 68:     FN Mxalloc
GEMDOS 69:     FN Fdup
GEMDOS 70:     FN Fforce
GEMDOS 72:     FN Malloc
GEMDOS 73:     FN Mfree
GEMDOS 74:     FN Mshrink
GEMDOS 75:     FN Pexec
GEMDOS 76:     Pterm
GEMDOS 78:     FN Fsfirst
GEMDOS 79:     FN Fsnext
GEMDOS 86:     FN Frename
GEMDOS 87:     FN Fdatime
GEMDOS 92:     FN Flock


FN Cauxin
R=FN Cauxin
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Read character from standard AUX:"
˘ Parameter:
  R: Empfangenes Zeichen
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,3)

FN Cauxis
R=FN Cauxis
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Check status of standard AUX: input"
˘ Parameter:
  R: -1: Zeichen ist verfÅgbar
      0: Es liegt kein Zeichen vor
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,18)

FN Cauxos
R=FN Cauxos
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Check status of standard AUX: output"
˘ Parameter:
  R: -1: Zeichen kann ausgegeben werden
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,19)

Cauxout
PROC Cauxout(Char)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Write character to standard AUX:"
˘ Parameter:
  Char: Auszugebendes ASCII-Zeichen
˘ Hinweise:
  ¯ Bits 0..7 benutzen und alle anderen Bits auf 0
    setzen.
  ¯ Ersetzt den Befehl GEMDOS (,4,Char)

FN Cconin
R=FN Cconin
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Read character from standard input"
˘ Parameter:
  R: eingelesenes Zeichen
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,1)

FN Cconis
R=FN Cconis
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Check status of standard input"
˘ Parameter:
  R:  0: Zeichen nicht verfÅgbar
     -1: Zeichen verfÅgbar
˘ Hinweis:
  Ersetzt den Befehl GEMDOS

FN Cconos
R=FN Cconos
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Check status of standard output"
˘ Parameter:
  R: 1: Zeichen kann ausgegeben werden
     0: Zeichen kann nicht ausgegeben werden
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,16)

Cconout
PROC Cconout(Char)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Write character to standard output"
˘ Parameter:
  Char: Auszugebendes Zeichen
˘ Hinweise:
  ¯ Bits 0..7 benutzen, alle anderen Bits auf 0
    setzen.
  ¯ Ersetzt den Befehl GEMDOS (,2,Char)

Cconrs
PROC Cconrs(Buffer)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Read edited data from standard input"
˘ Parameter:
  Buffer: Adresse einer LINE-Struktur
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (,10,L Buffer)

Cconws
PROC Cconws(Str)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Write string to standard output"
˘ Parameter:
  Str: Stringpointer auf auszugebende Zeichenkette
˘ Hinweise:
  ¯ Der String, auf den Str zeigt, muû durch ein
    Nullbyte abgeschlossen sein.
  ¯ Ersetzt den Befehl GEMDOS (,9,L Addr_Str)

FN Cnecin
R=FN Cnecin
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Read character from standard input, no echo"
˘ Parameter:
  R: eingelesenes Zeichen
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,8)

FN Cprnos
R=FN Cprnos
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Check status of standard PRN:"
˘ Parameter:
  R:  0: Drucker nicht empfangsbereit
  R: -1: Drucker empfangsbereit
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,17)

FN Cprnout
R=FN Cprnout(C)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Write character to standard PRN:"
˘ Parameter:
  C: Auszugebendes Zeichen
  R: RÅckgabewert der entsprechende BIOS-Funktion
     0 (OK), sonst Fehler
˘ Hinweise:
  ¯ Bits 0..7 benutzen, alle anderen Bits auf 0
    setzen.
  ¯ Ersetzt den Befehl GEMDOS (R,5,C)

FN Crawcin
R=FN Crawcin
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Raw input from standard input"
˘ Parameter:
  R: das eingelesene Zeichen
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,7)

FN Crawio
R=FN Crawio(W)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Raw I/O to standard input/output"
˘ Parameter:
  W: $FF:   Zeichen von stdin einlesen
     sonst: Zeichen auf stdout ausgeben
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,6,W)

FN Dcreate
R=FN Dcreate(Pathname)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Create directory"
˘ Parameter:
  Pathname: Stringpointer auf gÅltigen Ordnernamen
  R:        0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  ¯ Ersetzt den Befehl GEMDOS (R,57,L Pointer)
  ¯ Der String muû mit einem Nullbyte enden.

FN Ddelete
R=FN Ddelete(Pathname)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Delete directory"
˘ Parameter:
  Pathname: Stringpointer auf gÅltigen Ordnernamen
  R:        0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Der String muû mit einem Nullbyte abgeschlossen
    sein.
  ¯ Ersetzt den Befehl GEMDOS (R,58,L Pointer)

FN Dfree
R=FN Dfree(Buf,Drv)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get drive free space"
˘ Parameter:
  Buf: Adresse einer DISKINFO-Struktur
  Drv: 0 = aktuelles Laufwerk, 1 = A, 2 = B ...
  R:   0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  ¯ Als DISKINFO-Struktur benutzt man am besten
    einen 16 Bytes groûen Speicherbereich, den man
    sich mit MEMORY beschafft.
  ¯ Ersetzt den Befehl GEMDOS (R,54,L Buf,L Drv)

FN Dgetdrv
R=FN Dgetdrv
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get default drive"
˘ Parameter:
  R: 0 = A, 1 = B, 2 = C, ...
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,25)

FN Dgetpath
R=FN Dgetpath(Buf,Drv)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get current directory"
˘ Parameter:
  Buf: Zeiger auf einen Puffer, der nach dem Aufruf
       den aktuellen Zugriffspfad enthÑlt.
  Drv: 0 = aktuelles Laufwerk, 1 = A, 2 = B, ...
  R:   0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Der Puffer sollte mind. 256 Zeichen groû sein.
  ¯ Ersetzt den Befehl GEMDOS (R,71,L Buf,L Drv)

FN Dsetdrv
R=FN Dsetdrv(Drv)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Set default drive"
˘ Parameter:
  Drv: Nummer des neuen Laufwerks (0=A, 1=B,...)
  R:   Bitvektor mit den vorhandenen Laufwerken
       (Bit 0: A, Bit 1: B, ...)
˘ Hinweise:
  ¯ GEMDOS macht keine PlausibilitÑtstests.
  ¯ Ersetzt den Befehl GEMDOS (R,14,Drv)

FN Dsetpath
R=FN Dsetpath(Path)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Set current directory"
˘ Parameter:
  Path: Stringpointer auf neuen Pfadnamen
  R:    0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Der String, auf den Path zeigt, muû durch ein
    Nullbyte abgeschlossen sein
  ¯ Ersetzt den Befehl GEMDOS (R,59,L Pointer)

FN Fattrib
R=FN Fattrib(Fname,Wflag,Attribs)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get/Set file attributes"
˘ Parameter:
  Fname:   Dateiname der betreffenden Datei
  Wflag:   0: Attribute lesen
           1: Attribute <Attribs> setzen
  Attribs: Dateiattribute
           Bit 0: schreibgeschÅtzt
           Bit 1: versteckt
           Bit 2: Systemdatei
           Bit 3: Diskettenname
           Bit 4: Ordner
           Bit 5: Archiv-Bit
  R:       0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,67,L Pointer,
                                 Wflag,Attribs)

FN Fclose
R=FN Fclose(Handle)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Close File"
˘ Parameter:
  Handle: Kennung der Datei
  R:      0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,62)

FN Fcreate
R=FN Fcreate(Fname,Attribs)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Create File"
˘ Parameter:
  Fname:   Stringpointer auf den Dateinamen
  Attribs: Bit 0: schreibgeschÅtzt
           Bit 1: versteckt
           Bit 2: Systemdatei
           Bit 3: Diskettenname
  R:       Kennung der Datei oder einer der
           TOS-Fehlercodes
˘ Hinweis:
  Ersetzt GEMDOS (R,60,L Pointer,Attribs)

FN Fdatime
R=FN Fdatime(Timeptr,Handle,Wflag)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get/Set file timestamp"
˘ Parameter:
  Timeptr: Adresse einer DOSTIME-Struktur
  Handle:  Dateikennung
  Wflag:   0: Aktuelle Werte lesen und in der
              DOSTIME-Struktur eintragen
           1: Werte aus der DOSTIME-Struktur ins
              Directory eintragen.
  R:
˘ Hinweis:
  Ersetzt GEMDOS (R,87,L Timeptr,Handle,Wflag)

FN Fdelete
R=FN Fdelete(Fname)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Delete File"
˘ Parameter:
  Fname: Strinpointer auf den Dateinamen
  R:     0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Der String, auf den <Fname> zeigt, muû durch
    ein Nullbyte abgeschlossen sein
  ¯ Ersetzt den Befehl GEMDOS (R,65,L Pointer)

FN Fdup
R=FN Fdup(Handle)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Duplicate file handle"
˘ Parameter:
  Handle: Nummer des Standardkanals:
          0: stdin  (Tastatur)
          1: stdout (Bildschirm)
          2: stdaux (Serielle Schnittstelle)
          3: stdprn (Parallele Schnittstelle)
  R:      Neue Kennung oder einer der
          TOS-Fehlercodes
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,69,Handle)

FN Fforce
R=FN Fforce(Stdh,Nonstdh)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Force file handle"
˘ Parameter:
  Stdh:    Nummer des umzuleitenden Kanals:
           1: stdin  (Tastatur)
           2: stdout (Bildschirm)
           3: stdaux (Serielle Schnittstelle)
           4: stdprn (Parallele Schnittstelle)
  Nonstdh: Nummer des ersetzenden Kanals (muû
           bereits geîffnet wordensein)
  R:       0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,70,Stdh,Nonstdh)

FN Fgetdat
R=FN Fgetdat
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get DTA"
˘ Parameter:
  R: Adresse der aktuellen DTA
˘ Hinweise:
  ¯ Siehe auch: DTA-Struktur
  ¯ Ersetzt den Befehl GEMDOS (R,47)

FN Flock
R=FN Flock(Handle,Mode,Start,Length)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Lock file"
˘ Parameter:
  Handle: Kennung der Datei
  Mode:   0: <length> Bytes ab <start> blockieren
          1: Blockierung aufheben. <length> und
             <start> mÅssen zu einer Blockierung
             passen.
  Start:  Startposition in der Datei
  Length: Anzahl der Bytes
  R:      0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt GEMDOS (R,92,Handle,Mode_,L Start
                     ,L Length)

FN Fopen
R=FN Fopen(Fname,Mode)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Open file"
˘ Parameter:
  Fname: Stringpointer auf den Dateinamen
  Mode:  0: nur lesen
         1: nur schreiben
         2: lesen und schreiben
  R:     Dateikennung (Handle) oder einer der
         TOS-Fehlercodes
˘ Hinweise:
  ¯ Der String, auf den Fname zeigt, muû durch ein
    Nullbyte abgeschlossen sein.
  ¯ Ersetzt GEMDOS (R,61,L Pointer,Mode)

FN Fread
R=FN Fread(Handle,Count,Buffer)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Read from file"
˘ Parameter:
  Handle: Dateikennung
  Count:  Anzahl der zu lesenden Bytes
  Buffer: Anfangsadresse des Puffers
  R:      Anzahl der tatsÑchlich gelesenen Bytes
          (0 bedeutet EOF) oder einer der
          TOS-Fehlercodes
˘ Hinweis:
  Ersetzt GEMDOS (R,63,Handle,L Count,L Buf)

FN Frename
R=FN Frename(Oldname,Newname)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Rename file"
˘ Parameter:
  Oldname: Stringpointer auf den bisherigen Namen
  Newname: Stringpointer auf den neuen Dateinamen
  R:       0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Die Strings, auf die Oldname und Newname
    zeigen, mÅssen durch ein Nullbyte abgeschlossen
    sein.
  ¯ Der neue Name darf ein kompletter Pfad sein. In
    dem Fall wird die Datei verschoben.
  ¯ Ersetzt GEMDOS (R,86,0,L Oldpointer,
                                    L Newpointer)

FN Fseek
R=FN Fseek(Offset,Handle,Seekmode)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Seek file pointer"
˘ Parameter:
  Offset:   Anzahl der Bytes, die Åbersprungen
            werden sollen.
  Handle:   Dateikennung
  Seekmode: Zugriffszeiger setzen
            0: an den Dateistart
            1: ab aktueller Position
            2: ab Dateiende
  R:        Neue absolute Position des Zeigers oder
            einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt GEMDOS (R,66,L Offset,Handle,Seekmode)

Fsetdta
Fsetdta(Ptr)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Set DTA"
˘ Parameter:
  Ptr: Adresse der neuen DTA
˘ Hinweis:
  Siehe auch: DTA-Struktur
  Ersetzt den Befehl GEMDOS (,26,L Ptr)

FN Fsfirst
R=FN Fsfirst(Fspec,Attribs)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Search first"
˘ Parameter:
  Fspec:   Stringpointer auf den Dateinamen
  Attribs: Atrribute des gesuchten Dateityps:
           Bit 0: schreibgeschÅtzt
           Bit 1: versteckt
           Bit 2: Systemdatei
           Bit 3: Diskettenname
           Bit 4: Ordner
           Bit 5: Archiv-Bit
  R:       0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Der Dateiname, auf den Fspec zeigt, muû durch
    ein Nullbyte abgeschlossen sein.
  ¯ Ersetzt GEMDOS (R,78,L Pointer,Attribs)

FN Fsnext
R=FN Fsnext
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Search next"
˘ Parameter:
  R: 0 (OK) oder einer der TOS-Fehlercodes
˘ Hinweise:
  ¯ Setzt die mit FN Fsfirst begonnene Suche fort
  ¯ Ersetzt den Befehl GEMDOS (R,79)

FN Fwrite
R=FN Fwrite(Handle,Count,Buffer)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Write to file"
˘ Parameter:
  Handle: Dateikennung
  Count:  Anzahl der zu schreibenden Bytes
  Buffer: Anfangsadresse des Puffers
  R:      Anzahl der tatsÑchlich geschriebenen
          Bytes oder einer der TOS-Fehlercodes
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,64,Handle,L Count,
                                 L Buffer)

FN Maddalt
R=FN Maddalt(Start,Size)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Inform GEMDOS of 'alternative' memory"
˘ Parameter:
  Start: Anfangsadresse des Speicherbereichs
  Size:  LÑnge des Speicherbereichs
  R:     0 (alles ok) oder eine Fehlermeldung
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,20,L Start,L Size)

FN Malloc
R=FN Malloc(Amount)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Allocate memory"
˘ Parameter:
  Amount:    -1: LÑnge des grîûte verfÅgbaren Spei-
                 cherblocks berechnen.
          sonst: Anzahl der zu reservierenden Bytes
  R:      LÑnge des grîûten Speicherbereichs bzw.
          die Adresse des reservierten Bereichs
          (im Fehlerfall 0)
˘ Hinweise:
  ¯ Ersetzt den Befehl GEMDOS (R,72,L Amount)

FN Mfree
R=FN Mfree(Saddr)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Release memory"
˘ Parameter:
  Saddr: Anfangsadresse des freizugebenden Spei-
         cherbereichs
  R:      0  (OK)
         -40 (EIMBA)
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,73,L Saddr)

FN Mshrink
R=FN Mshrink(Block,Newsize)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Shrink size of allocated block"
˘ Parameter:
  Block:   Anfangsadresse des zu verkÅrzenden Spei-
           cherbereichs
  Newsize: Neue (verkÅrzte) Grîûe des Bereichs
  R:        0  (OK)
           -40 (EIMBA)
           -67 (EGSFB)
˘ Hinweis:
  Ersetzt GEMDOS (R,74,0,L Block,L Newsize)

FN Mxalloc
R=FN Mxalloc(Amount,Mode)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Allocate memory (with preference)"
˘ Parameter:
  siehe FN Malloc
˘ Hinweis:
  Ersetzt GEMDOS (R,68,L Amount,L Mode)

FN Pexec
R=FN Pexec(Mode,File,Cmdlin,Env)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Loade/Execute Process"
˘ Parameter:
  Mode:   0: LOAD AND GO
          3: LOAD, DON'T GO
          4: JUST GO
          5: CREATE BASEPAGE
          6: JUST GO, THEN FREE
             (ab GEMDOS 0.15)
          7: CREATE BASEPAGE, RESPECTING PRGFLAGS
             (ab GEMDOS 0.19)
  File:   Stringpointer auf den Programmnamen
  Cmdlin: Kommandozeile fÅr das Programm als
          Pascal-String (im ersten Byte die LÑngen-
          angabe)
  Env:    Adresse des Environments fÅr das zu
          startende Programm oder 0 (dann legt das
          GEMDOS eine Kopie des aktuellen Environ-
          ments an)
  R:      siehe ST/STE/TT-Profibuch
˘ Hinweise:
  ¯ Der String, auf den File zeigt, muû durch ein
    Nullbyte abgeschlossen sein.
  ¯ Ersetzt GEMDOS (R,75,Mode,L File_Ptr,
                               L Cmdlin_Ptr,L Env)



Pterm0
PROC Pterm0
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Terminate Process"
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (,0)

Pterm
PROC Pterm(Retcode)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Terminate Process"
˘ Parameter:
  Retcode: Return-Wert, welcher an das aufrufende
           Programm geliefert wird. öbliche Werte:
             0: alles in Ordnung
             1: allgemeine Fehlermeldung
             2: Fehler in Åbergebenen Parametern
            -1: nicht benutzen, da dieser Wert
                ab GEMDOS 0.15 bei einem Absturz
                zurÅckgeliefert wird
           -32: nicht benutzen, da dieser Wert bei
                Abbruch durch CTRL-C zurÅckge-
                liefert wird.
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (,76,Retcode)

Ptermres
PROC Ptermres(Keep,Ret)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Terminate and stay resident"
˘ Parameter:
  Keep: Anzahl der resident zu haltenen Bytes
        (ab Anfang der Basepage, mind. 128 Bytes)
  Ret:  Status, der an das aufrufende Programm
        zurÅckgeliefert wird.
        Siehe auch: Pterm
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (,49,L Keep,Ret)

FN Super
R=FN Super(Stack)
---------------------------------------------------
˘ Typ:
  GEMDOS-Prozedur der DHTOS.LIB
˘ Aufgabe:
  "Get/Set/Inquire supervisor mode"
˘ Parameter:
  Stack: 1: momentaner Prozessorstatus wird zurÅck-
            geliefert (0 = User, -1 = Supervisor)
         0: Umschalten in den Supervisor-Modus,
            wenn der Prozessor im User-Modus ist.
        >1: Umschalten des Prozessormodus. <Stack>
            wird der neue Stackpointer.
  R:    von <Stack> abhÑngig
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,32,L Stack)

FN Sversion
R=FN Sversion
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get version number"
˘ Parameter:
  R:  Low-Byte: Haupt-Revision
     High-Byte: Unter-Revision
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,48)
˘ Beispiel:
  R = $1300 -> GEMDOS 0.13
  R = $1900 -> GEMDOS 0.19

FN Tgetdate
R=FN Tgetdate
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get date"
˘ Parameter:
  R: Aktuelles Datum:
     Bit 0..4:  Tag (0..31)
     Bit 5..8:  Monat (1..12)
     Bit 9..15: Jahre seit 1980 (0..119)
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,42)

FN Tgettime
R=FN Tgettime
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Get Time"
˘ Parameter:
  R: Aktuelle Uhrzeit:
     Bit 0..4:   Sekunden (0..29)
     Bit 5..10:  Minuten (0..59)
     Bit 11..15: Stunden (0..23)
˘ Hinweise:
  ¯ Die Sekunden mÅssen verdoppelt werden.
  ¯ Ersetzt den Befehl GEMDOS (R,44)

FN Tsetdate
R=FN Tsetdate(Date)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Set date"
˘ Parameter:
  Date: Siehe FN Tgetdate
  R:    -1: Datum war ungÅltig
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,43,Date)

FN Tsettime
R=FN Tsettime(Time)
---------------------------------------------------
˘ Typ:
  GEMDOS-Funktion der DHTOS.LIB
˘ Aufgabe:
  "Set time"
˘ Parameter:
  Date: Siehe FN Tgettime
  R:    1: Uhrzeit war ungÅltig
˘ Hinweis:
  Ersetzt den Befehl GEMDOS (R,45,Time)


DHTOS.END

